(this.webpackJsonppollsmaker=this.webpackJsonppollsmaker||[]).push([[0],{141:function(e,t,a){},143:function(e,t,a){},274:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(25),s=a.n(r),o=a(14),l=(a(141),a(15)),i=(a(142),a(143),a(13)),j=a(12),b=a.n(j),d=a(19),u=a(8),p=a(20),h=a.n(p),O=a(57),m=a(133),x=a(1),g=function(){var e=Object(i.f)();return Object(x.jsxs)(O.a,{className:"navbar",collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",style:{paddingLeft:"50px"},children:[Object(x.jsx)(O.a.Brand,{children:Object(x.jsx)(o.b,{to:"/",children:"Polls Maker"})}),Object(x.jsx)(O.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(x.jsx)(O.a.Collapse,{id:"responsive-navbar-nav",children:Object(x.jsx)(m.a,{className:"justify-content-end",children:window.localStorage.getItem("curr_user")&&Object(x.jsx)("button",{type:"submit",className:"btn btn-primary ml-auto",onClick:function(){window.localStorage.removeItem("curr_id"),window.localStorage.removeItem("curr_user"),e.push("/sign-in")},children:"Log Out"})})})]})};a(82);function f(){var e=Object(i.f)();window.localStorage.getItem("curr_user")&&e.push("/");var t=Object(c.useState)(""),a=Object(u.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(""),l=Object(u.a)(s,2),j=l[0],p=l[1],O=function(){var t=Object(d.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={email:n,password:j},t.next=3,h.a.post("https://pollmaker.herokuapp.com/login",a).then((function(t){"allow"==t.data.message&&(window.localStorage.setItem("curr_user",a.email),window.localStorage.setItem("curr_id",t.data.id),e.push("/"))}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(g,{}),Object(x.jsx)("form",{onSubmit:function(e){e.preventDefault(),O()},children:Object(x.jsxs)("div",{className:"inner",children:[Object(x.jsx)("h3",{children:"Log in"}),Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"row",children:Object(x.jsxs)("div",{className:"col-12",children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"Email"}),Object(x.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email",value:n,onChange:function(e){r(e.target.value)}})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"Password"}),Object(x.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",value:j,onChange:function(e){p(e.target.value)}})]}),Object(x.jsx)("div",{className:"form-group"}),Object(x.jsx)("button",{type:"submit",className:"btn btn-dark btn-lg btn-block",children:"Sign in"}),Object(x.jsxs)("p",{className:"forgot-password text-right",children:["don't have account ? ",Object(x.jsx)(o.b,{to:"/sign-up",children:"Sign Up"})]})]})})})]})})]})}var v=function(){var e=Object(i.f)(),t=Object(c.useState)(""),a=Object(u.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(""),l=Object(u.a)(s,2),j=l[0],p=l[1],O=Object(c.useState)(""),m=Object(u.a)(O,2),f=m[0],v=m[1],w=Object(c.useState)(""),y=Object(u.a)(w,2),N=y[0],k=y[1],S=Object(c.useState)(""),C=Object(u.a)(S,2),I=C[0],P=C[1];window.localStorage.getItem("curr_id")&&e.push("/");var L=function(){var t=Object(d.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={firstName:j,lastName:n,email:f,password:N},t.next=3,h.a.post("https://pollmaker.herokuapp.com//signup",a).then((function(t){"user registered"==t.data.message?(alert("User Registered"),e.push("/sign-in")):"email exist"==t.data.message?P("email exist"):alert("Error")}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(g,{}),Object(x.jsx)("form",{onSubmit:function(e){e.preventDefault(),L()},children:Object(x.jsxs)("div",{className:"inner",children:[Object(x.jsx)("h3",{children:"Register"}),I?Object(x.jsx)("div",{class:"alert alert-danger",role:"alert",children:I}):null,Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"First name"}),Object(x.jsx)("input",{type:"text",className:"form-control",placeholder:"First name",value:j,onChange:function(e){p(e.target.value)}})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"Last name"}),Object(x.jsx)("input",{type:"text",className:"form-control",placeholder:"Last name",value:n,onChange:function(e){r(e.target.value)}})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"Email"}),Object(x.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email",value:f,onChange:function(e){v(e.target.value)}})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"Password"}),Object(x.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",value:N,onChange:function(e){k(e.target.value)}})]}),Object(x.jsx)("button",{type:"submit",className:"btn btn-dark btn-lg btn-block",children:"Register"}),Object(x.jsxs)("p",{className:"forgot-password text-right",children:["Already registered ",Object(x.jsx)(o.b,{to:"/sign-in",children:" log in?"})]})]})})]})},w=a(17),y=a(54),N=a(26),k=function(){var e=Object(i.f)(),t=Object(c.useState)(""),a=Object(u.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(""),o=Object(u.a)(s,2),l=o[0],j=o[1],p=Object(c.useState)(""),O=Object(u.a)(p,2),m=O[0],f=O[1],v=Object(c.useState)(""),k=Object(u.a)(v,2),S=k[0],C=k[1],I=Object(c.useState)(""),P=Object(u.a)(I,2),L=P[0],_=P[1],F=Object(c.useState)(""),E=Object(u.a)(F,2),T=E[0],B=E[1],Q=Object(c.useState)(!1),U=Object(u.a)(Q,2),R=U[0],G=U[1],D=Object(c.useState)(!1),A=Object(u.a)(D,2),H=A[0],J=A[1];window.localStorage.getItem("curr_user")||e.push("/");var M=function(){var e=Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={user_id:window.localStorage.getItem("curr_id"),pollQuestion:n,options:[{opt:l,votes:0},{opt:m,votes:0},{opt:S,votes:0},{opt:L,votes:0}]},e.next=3,h.a.post("https://pollmaker.herokuapp.com/createpoll",t).then((function(e){"poll created"==e.data.message&&(B(e.data.shortUrl),G(!0),console.log(e.data))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsx)(g,{}),Object(x.jsxs)(N.a,{show:R,children:[Object(x.jsx)(N.a.Header,{children:Object(x.jsx)(N.a.Title,{children:"Poll Created"})}),Object(x.jsxs)(N.a.Body,{children:["Click the button to copy poll URL ",Object(x.jsx)("br",{}),Object(x.jsx)("button",{className:"btn btn-primary",onClick:function(){navigator.clipboard.writeText(T),J(!0),setTimeout((function(){J(!1)}),1e3)},children:"Copy short Url"}),Object(x.jsx)("br",{}),H?"Link Copied":null]}),Object(x.jsx)(N.a.Footer,{children:Object(x.jsx)(y.a,{variant:"secondary",onClick:function(){G(!1),e.push("/")},children:"Close"})})]}),Object(x.jsx)("div",{className:"container col-8 offset-2 shadow-lg p-3 mb-5 bg-white rounded",style:{marginTop:"50px"},children:Object(x.jsx)("div",{className:"row",children:Object(x.jsxs)("div",{className:"col-12",children:[Object(x.jsx)("center",{children:Object(x.jsx)("h1",{children:"Create Poll"})}),Object(x.jsxs)(w.a,{className:"col-8 offset-2",style:{marginBottom:"3em"},onSubmit:function(e){e.preventDefault(),M()},children:[Object(x.jsxs)(w.a.Group,{controlId:"formPollQuestion",children:[Object(x.jsx)(w.a.Label,{children:"Poll Question"}),Object(x.jsx)(w.a.Control,{type:"text",placeholder:"Enter Poll Question",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(x.jsxs)(w.a.Group,{controlId:"formOption1",children:[Object(x.jsx)(w.a.Label,{children:"Option 1"}),Object(x.jsx)(w.a.Control,{type:"text",placeholder:"Option1",value:l,onChange:function(e){return j(e.target.value)}})]}),Object(x.jsxs)(w.a.Group,{controlId:"formOption2",children:[Object(x.jsx)(w.a.Label,{children:"Option 2"}),Object(x.jsx)(w.a.Control,{type:"text",placeholder:"Option2",value:m,onChange:function(e){return f(e.target.value)}})]}),Object(x.jsxs)(w.a.Group,{controlId:"formOption3",children:[Object(x.jsx)(w.a.Label,{children:"Option 3"}),Object(x.jsx)(w.a.Control,{type:"text",placeholder:"Option3",value:S,onChange:function(e){return C(e.target.value)}})]}),Object(x.jsxs)(w.a.Group,{controlId:"formOption4",children:[Object(x.jsx)(w.a.Label,{children:"Option 4"}),Object(x.jsx)(w.a.Control,{type:"text",placeholder:"Option1",value:L,onChange:function(e){return _(e.target.value)}})]}),Object(x.jsx)(y.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})})]})};var S=function(){var e=Object(i.f)(),t=window.localStorage.getItem("curr_id");window.localStorage.getItem("curr_user")||e.push("/sign-in");var a=Object(c.useState)([]),n=Object(u.a)(a,2),r=n[0],s=n[1];return Object(c.useEffect)(Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("https://pollmaker.herokuapp.com/getpolls/"+t).then((function(e){return s(e.data)}));case 2:case"end":return e.stop()}}),e)}))),[]),console.log(window.localStorage.getItem("curr_id")),console.log(r),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(g,{}),Object(x.jsxs)("div",{className:"content",style:{marginBottom:"10em"},children:[Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)(o.b,{className:"btn btn-primary col col-lg-2 col-md-4 col-sm-3 col-xs-4 ",style:{marginBottom:"20px"},to:"/createpoll",children:"Create Poll"})})}),Object(x.jsx)("hr",{}),0==r.length?Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("center",{children:[Object(x.jsx)("h1",{children:"No previous polls present "}),Object(x.jsx)("br",{}),"Create a new poll"]})}):Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{class:"card shadow mb-4 col-10 offset-1",children:[Object(x.jsx)("div",{class:"card-header py-3",children:Object(x.jsx)("h6",{class:"m-0 font-weight-bold text-primary",children:"Previous Polls"})}),Object(x.jsx)("div",{class:"card-body",children:Object(x.jsxs)("table",{class:"table table-striped table-hover",children:[Object(x.jsx)("thead",{class:"thead-dark",children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{className:"col-7",children:"Poll"}),Object(x.jsx)("th",{className:"col-5",children:"Action"})]})}),Object(x.jsx)("tbody",{children:r.map((function(t){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:t.pollQuestion}),Object(x.jsxs)("td",{children:[Object(x.jsx)("button",{className:"btn btn-primary btn-sm",onClick:function(){navigator.clipboard.writeText(t.shortUrl)},children:"Copy URL"}),Object(x.jsx)("button",{className:"btn btn-warning btn-sm",style:{marginLeft:"50px"},onClick:function(){e.push("/result/"+t._id)},children:"Result"})]})]})}))})]})})]})})]})]})},C=a(296),I=a(298),P=a(300),L=a(297),_=a(299),F=function(e){var t=Object(i.f)(),a=e.match.params.id,r=Object(c.useState)([]),s=Object(u.a)(r,2),o=s[0],l=s[1],j=Object(c.useState)({}),p=Object(u.a)(j,2),O=p[0],m=p[1],f=Object(c.useState)(!1),v=Object(u.a)(f,2),w=v[0],k=v[1];Object(c.useEffect)(Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("https://pollmaker.herokuapp.com/poll/"+a).then((function(e){m(e.data),l(e.data.options)}));case 2:case"end":return e.stop()}}),e)}))),[]);var S=n.a.useState(""),F=Object(u.a)(S,2),E=F[0],T=F[1],B=Object(c.useState)(!1),Q=Object(u.a)(B,2),U=Q[0],R=Q[1],G=function(){var e=Object(d.a)(b.a.mark((function e(t){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=E){e.next=4;break}k(!0),e.next=7;break;case 4:return c={vote:E},e.next=7,h.a.post("https://pollmaker.herokuapp.com/submit/"+a,c).then((function(e){"vote submitted"==e.data.message&&(R(!0),window.localStorage.setItem(a,"true"))}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return window.localStorage.getItem(a)&&(alert("you have submitted the poll"),t.push("/sign-in")),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(g,{}),Object(x.jsxs)(N.a,{show:U,backdrop:"static",keyboard:!1,children:[Object(x.jsx)(N.a.Header,{children:Object(x.jsx)(N.a.Title,{children:"Poll Created"})}),Object(x.jsxs)(N.a.Body,{children:["Poll Submitted ",Object(x.jsx)("br",{}),"Thank You",Object(x.jsx)("br",{})]}),Object(x.jsx)(N.a.Footer,{children:Object(x.jsx)(y.a,{variant:"primary",onClick:function(){R(!1),t.push("/sign-in")},children:"Okay"})})]}),Object(x.jsxs)("div",{className:"container col-8 offset-2 shadow-lg p-3 mb-5 bg-white rounded",style:{marginTop:"50px"},children:[w?Object(x.jsx)("div",{class:"alert alert-danger",role:"alert",children:"Please select any option"}):null,Object(x.jsx)("div",{className:"row",children:Object(x.jsxs)("div",{className:"col-12",children:[Object(x.jsx)("center",{children:Object(x.jsx)("h1",{children:"Poll"})}),Object(x.jsx)("div",{className:"offset-1",children:Object(x.jsx)("form",{onSubmit:function(e){e.preventDefault(),G()},children:Object(x.jsxs)(L.a,{component:"fieldset",children:[Object(x.jsx)(_.a,{component:"legend",children:Object(x.jsx)("h2",{style:{color:"blueviolet"},children:O.pollQuestion})}),Object(x.jsx)(I.a,{"aria-label":"gender",name:"gender1",value:E,onChange:function(e){T(e.target.value)},children:o.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(P.a,{value:e.opt,control:Object(x.jsx)(C.a,{}),label:e.opt})})}))}),Object(x.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Submit"})]})})})]})})]})]})},E=a(132),T=function(e){Object(i.f)();var t=e.match.params.id,a=Object(c.useState)({}),n=Object(u.a)(a,2),r=n[0],s=n[1],o=[],l=[],j=Object(c.useState)({}),p=Object(u.a)(j,2),O=p[0],m=p[1];Object(c.useEffect)(Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("https://pollmaker.herokuapp.com/poll/"+t).then((function(e){s(e.data),e.data.options.map((function(e){o.push(e.opt),l.push(e.votes)})),m({labels:o,datasets:[{label:"# of Votes",data:l,fill:!1,backgroundColor:["rgba(255, 99, 132, 0.8)","rgba(54, 162, 235, 0.8","rgba(255, 206, 86, 0.8)","rgba(75, 192, 192, 0.8)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)"],borderWidth:1}]})}));case 2:case"end":return e.stop()}}),e)}))),[]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(g,{}),Object(x.jsx)("div",{className:"container",style:{marginTop:"50px",paddingBottom:"100px"},children:Object(x.jsx)("div",{className:"row",children:Object(x.jsxs)("div",{className:"col-lg-4 offset-lg-4",children:[Object(x.jsx)("h2",{style:{marginBottom:"10px"},children:r.pollQuestion}),Object(x.jsx)(E.a,{data:O})]})})})]})};var B=function(){return Object(x.jsx)(o.a,{children:Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(i.c,{children:[Object(x.jsx)(i.a,Object(l.a)({exact:!0,path:"/",component:S},"exact",!0)),Object(x.jsx)(i.a,{path:"/sign-in",component:f,exact:!0}),Object(x.jsx)(i.a,{path:"/sign-up",component:v,exact:!0}),Object(x.jsx)(i.a,{path:"/createpoll",component:k,exact:!0}),Object(x.jsx)(i.a,{path:"/poll/:id",component:F,exact:!0}),Object(x.jsx)(i.a,{path:"/result/:id",component:T,exact:!0})]})})})};s.a.render(Object(x.jsx)(o.a,{children:Object(x.jsx)(B,{})}),document.getElementById("root"))},82:function(e,t,a){}},[[274,1,2]]]);
//# sourceMappingURL=main.7f719c3d.chunk.js.map